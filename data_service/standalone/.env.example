# trading-data-service 环境变量配置
# 复制此文件为 .env 并根据实际情况修改：
#   cp .env.example .env
#
# 服务发现说明:
#   设置 DOCKER_CONTAINER=true 后，MongoDB/Redis 主机名自动切换为容器服务名
#   (mongodb / redis)，无需额外配置。

# ── 服务配置 ──────────────────────────────────────────────
HOST=0.0.0.0
PORT=8001
DEBUG=false

# ── MongoDB 配置 ──────────────────────────────────────────
# 本地: MONGODB_HOST=localhost
# Docker 容器内自动用服务名，无需修改
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USERNAME=admin
MONGODB_PASSWORD=tradingagents123
MONGODB_DATABASE=tradingagents
MONGODB_AUTH_SOURCE=admin
MONGODB_ENABLED=true

# MongoDB 连接池
MONGO_MAX_CONNECTIONS=50
MONGO_MIN_CONNECTIONS=5
MONGO_CONNECT_TIMEOUT_MS=30000
MONGO_SOCKET_TIMEOUT_MS=60000
MONGO_SERVER_SELECTION_TIMEOUT_MS=5000

# ── Redis 配置 ────────────────────────────────────────────
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=tradingagents123
REDIS_DB=0
REDIS_ENABLED=true
REDIS_MAX_CONNECTIONS=20

# ── 安全配置 ──────────────────────────────────────────────
# ⚠️ 生产环境必须修改！生成方法:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET=change-me-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ── 数据源配置 ────────────────────────────────────────────
# A 股默认数据源: akshare（免费，推荐）/ tushare / baostock
DEFAULT_CHINA_DATA_SOURCE=akshare

# Tushare Pro Token（可选，获取: https://tushare.pro/）
TUSHARE_TOKEN=
TUSHARE_ENABLED=false

# FinnHub API Key（可选，美股，获取: https://finnhub.io/）
FINNHUB_API_KEY=

# ── 缓存配置 ──────────────────────────────────────────────
CACHE_TTL=3600
STOCK_DATA_CACHE_TTL=7200
NEWS_CACHE_TTL=14400
CACHE_DIR=./cache

# ── CORS ──────────────────────────────────────────────────
ALLOWED_ORIGINS=["*"]

# ── 日志 ──────────────────────────────────────────────────
LOG_LEVEL=INFO
TZ=Asia/Shanghai

# ── Docker 环境标识 ───────────────────────────────────────
# 设置为 true 时自动使用容器服务名（mongodb / redis）进行服务发现
DOCKER_CONTAINER=false
