# TradingAgents-CN 数据管理服务 环境变量配置
# 复制此文件为 .env 并根据实际情况修改
#
# 服务发现说明:
#   Docker 容器环境下（DOCKER_CONTAINER=true），服务会自动使用:
#     MONGODB_HOST=mongodb  (Docker 服务名)
#     REDIS_HOST=redis      (Docker 服务名)
#   本地开发时使用 localhost。

# ── 服务配置 ──────────────────────────────────────────────
HOST=0.0.0.0
PORT=8001
DEBUG=false
DATA_SERVICE_PORT=8001

# ── MongoDB 配置 ──────────────────────────────────────────
# Docker 容器内: MONGODB_HOST=mongodb
# 外部 MongoDB:  MONGODB_HOST=<宿主机IP或域名>
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USERNAME=admin
MONGODB_PASSWORD=tradingagents123
MONGODB_DATABASE=tradingagents
MONGODB_AUTH_SOURCE=admin
MONGODB_ENABLED=true
MONGODB_EXPOSE_PORT=27017

# MongoDB 连接池
MONGO_MAX_CONNECTIONS=50
MONGO_MIN_CONNECTIONS=5
MONGO_CONNECT_TIMEOUT_MS=30000
MONGO_SOCKET_TIMEOUT_MS=60000
MONGO_SERVER_SELECTION_TIMEOUT_MS=5000

# ── Redis 配置 ────────────────────────────────────────────
# Docker 容器内: REDIS_HOST=redis
# 外部 Redis:    REDIS_HOST=<宿主机IP或域名>
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=tradingagents123
REDIS_DB=0
REDIS_ENABLED=true
REDIS_MAX_CONNECTIONS=20
REDIS_EXPOSE_PORT=6379

# ── 安全配置 ──────────────────────────────────────────────
# 生产环境请使用强密码（至少 32 位随机字符串）
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET=change-me-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ── 数据源配置 ────────────────────────────────────────────
# A 股默认数据源: akshare（免费）/ tushare / baostock
DEFAULT_CHINA_DATA_SOURCE=akshare

# Tushare Pro Token（可选，A 股专业数据）
TUSHARE_TOKEN=your_tushare_token_here
TUSHARE_ENABLED=false

# FinnHub API Key（可选，美股数据）
FINNHUB_API_KEY=your_finnhub_api_key_here

# ── 缓存配置 ──────────────────────────────────────────────
CACHE_TTL=3600
STOCK_DATA_CACHE_TTL=7200
NEWS_CACHE_TTL=14400
CACHE_DIR=./cache

# ── CORS 配置 ─────────────────────────────────────────────
ALLOWED_ORIGINS=["*"]

# ── 日志配置 ──────────────────────────────────────────────
LOG_LEVEL=INFO
TZ=Asia/Shanghai

# ── Docker 环境标识 ───────────────────────────────────────
# 设置为 true 时服务自动使用容器服务名进行服务发现
DOCKER_CONTAINER=false
